<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, Helvetica,sans-serif;
          }
          body {
            background-color:whitesmoke;
          }
          .head {
            margin-top: 1rem;
            /* color: white; */
          }
          .box {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 3rem;
          }
          .form {
            display: flex;
            align-items: center;
            flex-direction: column;
            background-color: white;
            width: 600px;
            height: 500px;
            box-shadow: 2px 4px 10px gray;
            border: 1px solid black;
            border-radius: 20px;
            padding: 20px;
          }
          .input {
            padding: 10px 15px;
            border: 2px solid rgba(0, 0, 0, 0.4);
            font-size: 18px;
            outline: none;
            border-radius: 10px;
            background-color: rgba(0, 0, 0, 0.02);
          }
          label {
            font-size: 18px;
            letter-spacing: 1.4px;
          }
          .tableForm {
            margin-top: 10px;
            
          }
          .btn {
            background-color: rgb(231, 108, 55);
            color: white;
            padding: 10px 20px;
            font-size: large;
            font-weight: 600;
            border-radius: 10px;
          }

          input:invalid:focus {
            border: 2px solid red;
          }

          .table {
            border: 2px solid black;
            margin: 40px auto;
          }

          .td,
          .th {
            padding: 10px;
            text-align: center;
          }

          .subHead {
            text-align: center;
            margin-top: 2rem;
          }
    </style>
    
    <title> Registration Form </title>
</head>
<body>
    <h1 align="center" class="head">Registration Form</h1>
    <div class="box">
      <form class="form" id="form">

        <table class="tableForm" cellspacing="25px">
          <tr>
            <td><label for="name">Name :</label></td>
            <td>
              <input
                class="input"
                type="text"
                name="name"
                id="name"
                placeholder="Full Name"
                required
              />
            </td>
          </tr>
          <tr>
            <td><label for="email">E-mail :</label></td>
            <td>
              <input
                class="input"
                type="email"
                name="email"
                id="email"
                placeholder="Email"
                required
              />
            </td>
          </tr>
          <tr>
            <td><label for="name">Password :</label></td>
            <td>
              <input
                class="input"
                type="password"
                name="password"
                id="password"
                placeholder="Password"
                required
              />
            </td>
          </tr>
          <tr>
            <td><label for="dob">Date Of Birth :</label></td>
            <td>
              <input
                style="width: 220px"
                class="input"
                type="date"
                name="dob"
                id="dob"
                required
              />
            </td>
          </tr>
          <tr>
            <td colspan="2">
              <input type="checkbox" name="agree" id="agree" />
              <label for="checkbox">I agree the Terms & Conditions</label>
            </td>
          </tr>
          <tr>
            <td>
              <button class="btn" type="submit">Submit</button>
            </td>
          </tr>
        </table>
      </form>
    </div>

    <div class="entry">
      <h2 class="subHead">Entries</h2>
      <div id="tableDiv"></div>
    </div>
    <script async="False">
      let form = document.getElementById("form");

// localStorage.clear();
// let Entries = [];

const retriveEntries = () => {
  let entries = localStorage.getItem("userEntry");

  if (entries) {
    entries = JSON.parse(entries);
  } else {
    entries = [];
  }
  return entries;
};

let Entries = retriveEntries();

const displayEntries = () => {
  const entries = retriveEntries();

  const rows = entries
    .map((entry) => {
      const name = `<td class="td">${entry.name}</td>`;
      const email = `<td class="td">${entry.email}</td>`;
      const password = `<td class="td">${entry.password}</td>`;
      const dob = `<td class="td">${entry.dob}</td>`;
      const accseptConditions = `<td class="td">${entry.accseptConditions}</td>`;

      const row = `<tr>${name} ${email} ${password} ${dob} ${accseptConditions}</tr>`;
      return row;
    })
    .join("\n");

  let tableDiv = document.getElementById("tableDiv");

  // <th class="th">Name</th> inside oneMore head for name
  tableDiv.innerHTML = `<table class="table" border="2">
  <tr>
    <th class="th">Name</th>
    <th class="th">Email</th>
    <th class="th">Password</th>
    <th class="th">Dob</th>
    <th class="th">Accepted terms?</th>
  </tr>
    ${rows}
  </table>`;
};

// const saveUserFrom = () => {
const saveUserFrom = (event) => {
  event.preventDefault();

  let name = document.getElementById("name").value;
  let email = document.getElementById("email").value;
  let password = document.getElementById("password").value;
  let dob = document.getElementById("dob").value;
  let accseptConditions = document.getElementById("agree").checked;

  let entry_obj = {
    name,
    email,
    password,
    dob,
    accseptConditions,
  };

  Entries.push(entry_obj);

  localStorage.setItem("userEntry", JSON.stringify(Entries));

  displayEntries();
};

form.addEventListener("submit", saveUserFrom);

displayEntries();

// Add additional validations to the date input field so that it accepts date of birth for people between ages 18 and 55 only. You'll need to figure out how to do this.

function getAge(today, birthDate) {
  // var today = new Date();
  // var birthDate = new Date(DOB);

  var age = today.getFullYear() - birthDate.getFullYear();
  var m = today.getMonth() - birthDate.getMonth();
  if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
    age--;
  }
  return age;
}

let dateELE = document.getElementById("dob");

dateELE.addEventListener("change", () => {
  let [year, month, date] = document.getElementById("dob").value.split("-");

  let dob = new Date(year, month, date);
  let Today = new Date();

  age = getAge(Today, dob);

  dateELE.style.border = "2px solid rgba(0, 0, 0, 0.4)";
  if (age < 18 || age > 55) {
    dateELE.setCustomValidity("Your age is not lies between 18 and 55");
    dateELE.style.border = "2px solid red";
    return;
  } else {
    dateELE.setCustomValidity("");
  }
});

const email = document.getElementById("email");

email.addEventListener("input", () => validate(email));

function validate(ele) {
  if (ele.validity.typeMismatch) {
    ele.setCustomValidity("The Email is not in the right format!!!");
    ele.reportValidity();
  } else {
    ele.setCustomValidity("");
  }
}
    </script>
</body>
</html> 

<!--
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <style>
        form {
    max-width: 600px;
    margin: auto;
    padding: 20px;
    border: 1px solid #ccc;
    border-radius: 5px;
    }

h1{
    text-align: center;
}
label, input[type="submit"] {
	display: block;
	margin-bottom: 10px;
}

input[type="text"], input[type="email"], input[type="password"], input[type="date"] {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-sizing: border-box;
    font-size: 16px;
    margin-bottom: 10px;
}

input[type="checkbox"]{
    padding: 10px;
    border-radius: 10px;
    box-sizing: border-box;
    margin-bottom: auto;
}


button[type="submit"] {
    background-color: rgb(92, 92, 170);
    border-color:black;
    cursor: pointer;
    color: whitesmoke;
    border: none;
    border-radius: 5px;
    padding: 10px 20px;
    font-size: 16px;
}

button[type="submit"]:hover {
    background-color: yellowgreen;
}

input#name:invalid:focus{
    border:1px solid red;
} 

input#email:invalid:focus{
    border:1px solid red;
}

.error {
    color: red;
    margin-bottom: 10px;
}

.Display{
    display: grid;
}

.mx-auto {
    text-align: center;
    margin-right: auto!important;
    margin-left: auto!important;
}

.align {
    text-align: -webkit-center;
}

.container{

    border: 2px;
    border-radius: 2px;
    border-color: black;
}

.form{
    padding-top: 20px;
}

button {
    display: -webkit-box;
}
    </style>
    <title>Registration Form</title>
  </head>
  <body>
    <div class="form">
      
      <form id="user-form">
        <h1>Registration Form</h1>  
        <label for="name">Name</label>
        <input required type="text" name="name" id="name" />

        <label for="email">E-mail</label>
        <input required type="email" name="email" id="email" />

        <label for="password">Password</label>
        <input required type="password" name="password" id="password" />

        <label for="dob">Date Of Birth</label>
        <input required type="date" name="dob" id="dob" />

        <label for="acceptTerms">Accept Terms And Conditions</label>
        <input type="checkbox" name="acceptTerms" id="acceptTerms" />

        <button type="submit">Submit</button>
      </form>
    </div>
  <div class="container">
	<div
	class="relative bg white px-6 mt-5 pt-10 pb-8 shadow-xl ring-1 ring-gray-900/5 sm:mx-auto sm:rounded-lg sm:px-10">
  
	<div class="mx-auto"><h2>Entries</h2>
	<div class="align" id="user-entries"></div>
    <script>
        let userform = document.getElementById("user-form");

const retrieveEntries = () => {
    let entries=localStorage.getItem("user-entries");
    if (entries) {
        entries=JSON.parse(entries);
    }else{
        entries=[];
    }
    return entries;
}
let userEntry=retrieveEntries();

const displayEntries = () => {
  const entries = retrieveEntries();
  const tableEntries = entries
    .map((entry) => {
      const nameCell = `<td class='border px-3 py-2'>${entry.name}</td>`;
      const emailCell = `<td class='border px-3 py-2'>${entry.email}</td>`;
      const passwordCell = `<td class='border px-3 py-2'>${entry.password}</td>`;
      const dobCell = `<td class='border px-3 py-2'>${entry.dob}</td>`;
      const acceptTermsCell = `<td class='border px-3 py-2'>${entry.acceptTermsAndConditions}</td>`;
      const row = `<tr>${nameCell}${emailCell}${passwordCell}${dobCell}${acceptTermsCell}</tr>`;
      return row;
    })
    .join("\n");

  const table = `<table>
    <tr>
      <th class='border px-3 py-2'>Name</th>
      <th class='border px-3 py-2'>Email</th>
      <th class='border px-3 py-2'>Password</th>
      <th class='border px-3 py-2'>DOB</th>
      <th class='border px-3 py-2'>Accepted Terms?</th>
    </tr>
    ${tableEntries}
  </table>`;

  let details = document.getElementById("user-entries");
  details.innerHTML = table;
};


const saveuserForm = (event) => {
  event.preventDefault();
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  const dob = document.getElementById("dob").value;
  const acceptTermsAndConditions = document.getElementById("acceptTerms").checked;

  const dobDate = new Date(dob);
  const age = (Date.now() - dobDate.getTime()) / (1000 * 60 * 60 * 24 * 365.25);
  if (age < 18 || age > 55) {
    const errorField = document.querySelector(".error");
    errorField.textContent = "Your Age should be between 18 and 55 years old.";
    errorField.style.display = "block";
    return;
  }

  const entry={
    name,
    email,
    password,
    dob,
    acceptTermsAndConditions
  };
  userEntry.push(entry);

  localStorage.setItem("user-entries",JSON.stringify(userEntry));
  displayEntries().join("\n");
};
userform.addEventListener("submit", saveuserForm);
displayEntries();

const form = document.getElementById("user-form");
		const dobField = document.getElementById("dob");
		const errorField = document.createElement("div");
		errorField.className = "error";
		errorField.style.display = "none";
		form.insertBefore(errorField, dobField.nextSibling);
		
		form.addEventListener("submit", function(event) {
			const dob = new Date(dobField.value);
			const age = (Date.now() - dob.getTime()) / (1000 * 60 * 60 * 24 * 365.25);
			if (age < 18 || age > 55) {
				event.preventDefault();
				errorField.textContent = "You Age should be between 18 and 55 years old.";
				errorField.style.display = "block";
			} else {
				errorField.style.display = "none";
			}
		});
    </script>
    </div>
    
  </body>
</html> -->
